(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1240],{27234:function(e,n){"use strict";n.Z={src:"/_next/static/media/arkham_check.fdbf19b5.svg",height:19,width:19}},40570:function(e,n,t){"use strict";var a=t(26042),i=t(69396),u=t(85893),r=t(68101),s=t.n(r);n.Z=function(e){var n=(0,a.Z)({},{format:"primary",size:"default",block:!1,color:"var(--primary)"},e),t=n.color,r=n.format,o=n.size,p=n.block;return(0,u.jsx)("button",(0,i.Z)((0,a.Z)({},e),{className:[s().common,s()[r],"custom"!==o&&s()[o],p&&s().block,e.className].filter((function(e){return"string"==typeof e})).join(" "),style:{backgroundColor:"primary"===r?t:"transparent",borderColor:"text"!==r?t:"auto",color:"primary"===r?"var(--off-white)":t},children:e.children}))}},16550:function(e,n,t){"use strict";t.d(n,{On:function(){return T},GN:function(){return h},$l:function(){return k},pT:function(){return g},WD:function(){return Z}});var a=t(47568),i=t(26042),u=t(69396),r=t(34051),s=t.n(r),o=t(11752),p=t(67294),y=t(37918),d=t.n(y),l=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"initialSupply","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]'),c=JSON.parse('[{"inputs":[{"internalType":"address","name":"arkmAddress","type":"address"},{"internalType":"uint256","name":"initialSubmissionStake","type":"uint256"},{"internalType":"uint256","name":"initialMakerFee","type":"uint256"},{"internalType":"uint256","name":"initialTakerFee","type":"uint256"},{"internalType":"uint64","name":"bountyDuration","type":"uint64"},{"internalType":"address","name":"feeReceiverAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amountBurned","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amountWithdrawn","type":"uint256"}],"name":"BurnAndWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"bountyID","type":"uint256"},{"indexed":true,"internalType":"address","name":"funder","type":"address"},{"indexed":false,"internalType":"uint256","name":"payoutToFunder","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"excessFees","type":"uint256"}],"name":"CloseBounty","type":"event"},{"anonymous":false,"inputs":[],"name":"CloseBountySubmissions","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"bountyID","type":"uint256"},{"indexed":true,"internalType":"address","name":"funder","type":"address"},{"indexed":false,"internalType":"uint256","name":"initialValue","type":"uint256"},{"indexed":false,"internalType":"uint64","name":"expiration","type":"uint64"}],"name":"FundBounty","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"bountyID","type":"uint256"},{"indexed":true,"internalType":"address","name":"submitter","type":"address"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"payload","type":"bytes32"}],"name":"FundSubmission","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"}],"name":"GrantApprover","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"bountyID","type":"uint256"},{"indexed":true,"internalType":"address","name":"submitter","type":"address"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"payload","type":"bytes32"}],"name":"RejectSubmission","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"}],"name":"RevokeApprover","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"oldFee","type":"uint256"}],"name":"SetMakerFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newStake","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"oldStake","type":"uint256"}],"name":"SetSubmissionStake","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"oldFee","type":"uint256"}],"name":"SetTakerFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"bountyID","type":"uint256"},{"indexed":true,"internalType":"address","name":"submitter","type":"address"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"payload","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"payoutToSubmitter","type":"uint256"}],"name":"SubmissionApproved","type":"event"},{"inputs":[],"name":"acceptingBounties","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"accruedFees","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"amount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"},{"internalType":"uint256","name":"submission","type":"uint256"}],"name":"approveSubmission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"},{"internalType":"uint256","name":"submission","type":"uint256"}],"name":"approvedSubmission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"approver","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"arkm","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bountyDurationDays","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"burnAndWithdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"burnRatioBPS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"closeBounty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"closed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"expiration","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bool","name":"maker","type":"bool"}],"name":"fee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"fundBounty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"funder","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"grantApprover","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"initialAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"},{"internalType":"uint256","name":"submission","type":"uint256"}],"name":"isValidCurrentSubmission","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"},{"internalType":"bytes32","name":"payload","type":"bytes32"}],"name":"makeSubmission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"makerFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"rejectSubmission","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"payload","type":"bytes32"}],"name":"rejectedPayload","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"revokeApprover","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"feeReceiverAddress","type":"address"}],"name":"setFeeReceiverAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"setMakerFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newStake","type":"uint256"}],"name":"setSubmissionStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"setTakerFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stopAcceptingBounties","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"submissionStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"submissionStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"bounty","type":"uint256"}],"name":"submitter","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"takerFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),m=t(31047),f=t(65313),b=t(62984),w=t(97839),v=(0,o.default)().publicRuntimeConfig,T=function(e){var n=(0,p.useState)(void 0),t=n[0],a=n[1];return(0,p.useEffect)((function(){void 0!==window.ethereum&&null!=e&&new(new(d())(window.ethereum).eth.Contract)(l,v.arkmAddress).methods.balanceOf(e).call().then((function(e){a(e)}))}),[e]),t},h=function(){var e=(0,p.useState)(void 0),n=e[0],t=e[1];return(0,p.useEffect)((function(){void 0!==window.ethereum&&new(new(d())(window.ethereum).eth.Contract)(c,v.bountyV1Address).methods.submissionStake().call().then((function(e){t(e)}))}),[]),n},k=function(){var e=(0,p.useState)({loading:!1,connected:!1,rejected:!1,noMetamask:!1,account:null,chain:null}),n=e[0],t=e[1];(0,p.useEffect)((function(){void 0!==window.ethereum?window.ethereum.selectedAddress?t({loading:!1,connected:!0,rejected:!1,noMetamask:!1,account:window.ethereum.selectedAddress,chain:window.ethereum.chainId}):t({loading:!1,connected:!1,rejected:!1,noMetamask:!1,account:null,chain:null}):t({loading:!1,connected:!1,rejected:!1,noMetamask:!0,account:null,chain:null})}),[]);var r=(0,p.useCallback)((0,a.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.ethereum){e.next=3;break}return t({loading:!1,connected:!1,rejected:!1,noMetamask:!0,account:null,chain:null}),e.abrupt("return");case 3:return e.prev=3,t({loading:!0,connected:!1,rejected:!1,noMetamask:!1,account:null,chain:null}),e.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:n=e.sent,t({loading:!1,connected:!0,rejected:!1,noMetamask:!1,account:n[0],chain:window.ethereum.chainId}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),4001===e.t0.code?t({loading:!1,connected:!1,rejected:!0,noMetamask:!1,account:null,chain:null}):console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),[]);return(0,u.Z)((0,i.Z)({},n),{connectMetamask:r})},g=function(e){var n={approvalStatus:"not_started",approvalHash:void 0,fundingStatus:"not_started",fundingHash:void 0,error:void 0},t=(0,p.useState)(n),r=t[0],o=t[1],y=(0,f.b8)(),b=function(e){return y(["/bounty/user","/bounty/all","/bounty/".concat(e)])},w=function(e){return y(["/bounty_submission/".concat(e),"/bounty_submission/active","/bounty_submission/user"])};(0,p.useEffect)((function(){o(n)}),[e]);var T=(0,p.useCallback)(function(){var n=(0,a.Z)(s().mark((function n(t,a){var r,p,y,m,f,w,T,h;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=M(t),o((function(e){return(0,u.Z)((0,i.Z)({},e),{approvalStatus:"waiting_send",fundingStatus:"not_started",error:void 0})})),n.prev=2,window.ethereum){n.next=5;break}throw new Error("No Metamask");case 5:if(window.ethereum.selectedAddress){n.next=7;break}throw new Error("No Metamask");case 7:return p=window.ethereum.selectedAddress,y=new(d())(window.ethereum),m=new y.eth.Contract(c,v.bountyV1Address),f=new y.eth.Contract(l,v.arkmAddress),n.next=13,m.methods.makerFee().call();case 13:return w=n.sent,T=x(a,w),n.next=17,f.methods.allowance(p,v.bountyV1Address).call();case 17:if(!(n.sent<T)){n.next=23;break}return n.next=21,f.methods.approve(v.bountyV1Address,T).send({from:p}).on("transactionHash",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{approvalStatus:"waiting_confirm",approvalHash:e})}))})).on("receipt",(function(e){o((function(e){return(0,u.Z)((0,i.Z)({},e),{approvalStatus:"done",fundingStatus:"waiting_send"})}))})).on("error",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{approvalStatus:"error",error:e.message})}))}));case 21:n.next=24;break;case 23:o((function(e){return(0,u.Z)((0,i.Z)({},e),{approvalStatus:"done",fundingStatus:"waiting_send"})}));case 24:return n.next=26,m.methods.fundBounty(r,T).send({from:p}).on("transactionHash",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{fundingStatus:"waiting_confirm",fundingHash:e})}))})).on("receipt",(function(n){o((function(e){return(0,u.Z)((0,i.Z)({},e),{fundingStatus:"done"})})),b(e)})).on("error",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{fundingStatus:"error",error:e.message})}))}));case 26:n.next=33;break;case 28:n.prev=28,n.t0=n.catch(2),console.log(n.t0),h=n.t0.message,o((function(e){return(0,u.Z)((0,i.Z)({},e),{fundingStatus:"error",error:h})}));case 33:case"end":return n.stop()}}),n,null,[[2,28]])})));return function(e,t){return n.apply(this,arguments)}}(),[]),h=(0,p.useCallback)(function(){var n=(0,a.Z)(s().mark((function n(t,a){var r,p,y,f,T,h,k,g,x,Z;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=M(t),p=M(a),o((function(e){return(0,u.Z)((0,i.Z)({},e),{approvalStatus:"waiting_send",fundingStatus:"not_started",error:void 0})})),n.prev=3,window.ethereum){n.next=6;break}throw new Error("No Metamask");case 6:if(window.ethereum.selectedAddress){n.next=8;break}throw new Error("No Metamask");case 8:return y=window.ethereum.selectedAddress,f=new(d())(window.ethereum),T=new f.eth.Contract(c,v.bountyV1Address),h=new f.eth.Contract(l,v.arkmAddress),n.next=14,T.methods.submissionStake().call();case 14:return k=n.sent,n.next=17,h.methods.allowance(y,v.bountyV1Address).call();case 17:if(g=n.sent,!(BigInt(g)<BigInt(k))){n.next=24;break}return console.log("getting more allowance"),n.next=22,h.methods.approve(v.bountyV1Address,k).send({from:y}).on("transactionHash",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{approvalStatus:"waiting_confirm",approvalHash:e})}))})).on("receipt",(function(e){o((function(e){return(0,u.Z)((0,i.Z)({},e),{approvalStatus:"done",fundingStatus:"waiting_send"})}))})).on("error",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{approvalStatus:"error",error:e.message})}))}));case 22:n.next=25;break;case 24:console.log("already have enough allowance"),o((function(e){return(0,u.Z)((0,i.Z)({},e),{approvalStatus:"done",fundingStatus:"waiting_send"})}));case 25:return x=m.vP(["uint256","address"],[p,y]),n.next=28,T.methods.makeSubmission(r,x).send({from:y}).on("transactionHash",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{fundingStatus:"waiting_confirm",fundingHash:e})}))})).on("receipt",(function(n){o((function(e){return(0,u.Z)((0,i.Z)({},e),{fundingStatus:"done"})})),b(e),w(a)})).on("error",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{fundingStatus:"error",error:e.message})}))}));case 28:n.next=35;break;case 30:n.prev=30,n.t0=n.catch(3),console.log(n.t0),Z=n.t0.message,o((function(e){return(0,u.Z)((0,i.Z)({},e),{fundingStatus:"error",error:Z})}));case 35:case"end":return n.stop()}}),n,null,[[3,30]])})));return function(e,t){return n.apply(this,arguments)}}(),[]);return(0,u.Z)((0,i.Z)({},r),{fundBounty:T,makeSubmission:h})},x=function(e,n){var t=d().utils.toWei(e.toString(),"ether"),a=BigInt(t),i=BigInt(1e4);return a+(a*i/(i-BigInt(n))-a)},Z=function(e){var n={status:"not_started",hash:void 0,error:void 0},t=(0,p.useState)(n),r=t[0],o=t[1],y=(0,b.useAuthUser)(),l=(0,f.b8)(),m=function(e){return l(["/bounty/user","/bounty/all","/bounty/".concat(e)])},T=function(e){return l(["/bounty_submission/".concat(e),"/bounty_submission/active","/bounty_submission/user"])};(0,p.useEffect)((function(){o(n)}),[e]);var h=(0,p.useCallback)(function(){var e=(0,a.Z)(s().mark((function e(n,t){var a,r,p,l,f,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"waiting_send",error:void 0})})),e.prev=1,window.ethereum){e.next=4;break}throw new Error("No Metamask");case 4:if(window.ethereum.selectedAddress){e.next=6;break}throw new Error("No Metamask");case 6:return a=window.ethereum.selectedAddress,r=new(d())(window.ethereum),p=new r.eth.Contract(c,v.bountyV1Address),e.next=11,p.methods.approver(a).call();case 11:if(e.sent){e.next=14;break}throw new Error("Not an approver");case 14:return l=M(n),f=M(t),e.next=18,p.methods.approveSubmission(l,f).send({from:a}).on("transactionHash",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{status:"waiting_confirm",hash:e})}))})).on("receipt",(function(e){o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"notifying"})})),m(n),T(t)})).on("error",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{status:"error",error:e.message})}))}));case 18:return e.next=20,(0,w.ZI)(y,v.apiHost+"/bounty_submission/notify/".concat(t),{}).then((function(e){console.log(e),o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"done"})}))})).catch((function(e){console.log(e),o((function(n){return(0,u.Z)((0,i.Z)({},n),{status:"error",error:"Transaction succeeded but notifying users failed with error: ".concat(e.message)})}))}));case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0),b=e.t0.message,o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"error",error:b})}));case 27:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(n,t){return e.apply(this,arguments)}}(),[]),k=(0,p.useCallback)(function(){var e=(0,a.Z)(s().mark((function e(n){var t,a,r,p,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"waiting_send",error:void 0})})),e.prev=1,window.ethereum){e.next=4;break}throw new Error("No Metamask");case 4:if(window.ethereum.selectedAddress){e.next=6;break}throw new Error("No Metamask");case 6:return t=window.ethereum.selectedAddress,a=new(d())(window.ethereum),r=new a.eth.Contract(c,v.bountyV1Address),e.next=11,r.methods.approver(t).call();case 11:if(e.sent){e.next=14;break}throw new Error("Not an approver");case 14:return p=M(n),e.next=17,r.methods.rejectSubmission(p).send({from:t}).on("transactionHash",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{status:"waiting_confirm",hash:e})}))})).on("receipt",(function(e){o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"done"})})),m(n)})).on("error",(function(e){o((function(n){return(0,u.Z)((0,i.Z)({},n),{status:"error",error:e.message})}))}));case 17:e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),y=e.t0.message,o((function(e){return(0,u.Z)((0,i.Z)({},e),{status:"error",error:y})}));case 24:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(n){return e.apply(this,arguments)}}(),[]);return(0,u.Z)((0,i.Z)({},r),{approve:h,reject:k})},M=function(e){return BigInt("0x"+e.replace(/-/g,""))}},68101:function(e){e.exports={common:"Button_common__GIBN1",primary:"Button_primary__1n7q8",outline:"Button_outline___JmXY",text:"Button_text__tVvUD",block:"Button_block__v9mGc",small:"Button_small__Fagua",default:"Button_default__QruK_",large:"Button_large__lrPgX"}}}]);